export function getHeadContent(){return document.head.innerHTML}export function addLink(href,rel,obj){const link=document.createElement("link");link.href=href;link.rel=rel;obj&&(link.onload=()=>{obj.invokeMethodAsync("LinkLoaded")});document.head.appendChild(link)}export function addMultiSelect(CellsInDay,containerId,obj){function clearVisual(){selectedCells.forEach(k=>{const[d,r]=k.split("_"),el=getEl(d,parseInt(r,10));el&&el.classList.remove("cell-selected")});selectedCells.clear()}function addCell(dateStr,row){const el=getEl(dateStr,row);if(!(el&&el.dataset&&el.dataset.selectable==="true"))return!1;const key=toKey(dateStr,row);return selectedCells.has(key)||(el.classList.add("cell-selected"),selectedCells.add(key)),!0}function markVertical(start,end){if(start&&start.dataset&&end&&end.dataset){const dateStr=start.dataset.date,r1=parseInt(start.dataset.row,10),r2=parseInt(end.dataset.row,10),step=r1<=r2?1:-1;let r=r1;for(;;){if(!addCell(dateStr,r))break;if(r===r2)break;r+=step}}}function markHorizontal(start,end){if(start&&start.dataset&&end&&end.dataset){const startDateStr=start.dataset.date,endDateStr=end.dataset.date,startRow=parseInt(start.dataset.row,10),endRow=parseInt(end.dataset.row,10);let d=parseUtcDate(startDateStr);const target=parseUtcDate(endDateStr),dayStep=d<=target?1:-1;let row=startRow;for(;;){const dStr=dateToStr(d);if(!addCell(dStr,row))break;if(d.getTime()===target.getTime()&&row===endRow)break;row+=dayStep;(row<0||row>=CellsInDay)&&(d.setUTCDate(d.getUTCDate()+dayStep),row=dayStep>0?0:CellsInDay-1)}}}function hookMouseEvents(active){active?(container.addEventListener("mouseover",e=>handleMouseOver(e)),container.addEventListener("mouseup",()=>handleMouseUp()),document.addEventListener("mouseup",()=>handleMouseUp())):(container.removeEventListener("mouseover",e=>handleMouseOver(e)),container.removeEventListener("mouseup",()=>handleMouseUp()),document.removeEventListener("mouseup",()=>handleMouseUp()))}function handleMouseDown(e){const cell=e.target.closest("[data-row][data-date]");cell&&cell.dataset&&cell.dataset.selectable==="true"&&(clearVisual(),isMouseDown=!0,startCell=cell,addCell(cell.dataset.date,parseInt(cell.dataset.row,10)),hookMouseEvents(!0))}function handleMouseOver(e){if(isMouseDown&&startCell){const currentCell=e.target.closest("[data-row][data-date]");currentCell&&currentCell.dataset&&currentCell.dataset.selectable==="true"&&(clearVisual(),currentCell.dataset.date===startCell.dataset.date?markVertical(startCell,currentCell):markHorizontal(startCell,currentCell))}}function handleMouseUp(){const cells=Array.from(selectedCells);clearVisual();hookMouseEvents(!1);const flag=isMouseDown&&startCell&&cells.length!==0;isMouseDown=!1;startCell=null;flag&&obj.invokeMethodAsync("CellsSelected",cells)}let isMouseDown=!1,startCell=null,selectedCells=new Set;const toKey=(dateStr,row)=>`${dateStr}_${row}`,getEl=(dateStr,row)=>container.querySelector(`[data-date="${dateStr}"][data-row="${row}"]`),parseUtcDate=dateStr=>new Date(dateStr+"T00:00:00Z"),dateToStr=d=>d.toISOString().split("T")[0],container=document.getElementById(containerId);container&&container.addEventListener("mousedown",e=>handleMouseDown(e))}export function scroll(element,top){element.scrollTo(0,top)}export function addDragHandler(id,width){if(document.getElementsByClassName(id).length!==0){const dragZone=document.getElementsByClassName(id)[0];if(dragZone.children.length!==0){const dragItem=dragZone.getElementsByClassName("mud-drop-item")[0],xPos=dragItem.offsetWidth/(width*2);document.getElementsByClassName(id)[0].addEventListener("dragstart",e=>e.dataTransfer.setDragImage(dragItem,xPos,18))}}}export function newResizer(handleId,containerClass,cellCount,resizeX,obj){return new Resizer(handleId,containerClass,cellCount,resizeX,obj)}export function positionMonthItems(element,moreText,fixedHeight,obj){moreText&&(_moreText=moreText);obj&&(_obj=obj);_isRtl=document.querySelector(".mud-application-layout-rtl")!==null;element.querySelectorAll(".mud-cal-month-row-holder").forEach(function(container){container.querySelectorAll(".mud-cal-overflow-message").forEach(function(message){message.remove()});const datePositions=new Map,totalWidth=container.clientWidth,cellCount=container.querySelectorAll(".mud-cal-month-cell").length;let headerHeight=0,index=0;container.querySelectorAll(".mud-cal-month-cell").forEach(function(cell){let height=0;cell.querySelectorAll(".mud-cal-month-cell-header").forEach(function(item){height+=item.clientHeight});height>headerHeight&&(headerHeight=height);datePositions.set(Math.round(totalWidth/cellCount*index),cell.attributes.Identifier.textContent);index++});const positions=[],overlaps=[];if(container.querySelectorAll(".mud-cal-drop-item").forEach(function(item){item.classList.remove("mud-cal-overflow-hidden");const position=new ItemPosition;position.Item=item;position.Top=headerHeight;position.Height=item.clientHeight;position.Start=offsetStart(item);position.Width=item.clientWidth;for(let i=0;i<overlaps.length;i++)overlaps[i].End<=position.Start+1&&(overlaps.splice(i,1),i--);positions.push(position);let maxBottom=0;for(let i=0;i<overlaps.length;i++)overlaps[i].Bottom>maxBottom&&(maxBottom=overlaps[i].Bottom),overlaps[i].Top<position.Top+position.Height&&(position.Top=maxBottom+1);overlaps.push(position)}),fixedHeight){const starts=[];positions.forEach(position=>{starts.includes(position.Start)||starts.push(position.Start)});starts.forEach(start=>{hideOverflows(container,positions.filter(p=>p.Start===start),start,datePositions)})}else{let rowMaxBottom=headerHeight;positions.forEach(position=>{position.Bottom>rowMaxBottom&&(rowMaxBottom=position.Bottom)});container.style.height=rowMaxBottom+"px"}positions.forEach(position=>{position.Hidden?position.Item.classList.add("mud-cal-overflow-hidden"):position.Item.style.top=position.Top+"px"})})}function hideOverflows(container,positions,position,datePositions){let maxBottom=0;if(positions.forEach(position=>{position.Bottom>maxBottom&&(maxBottom=position.Bottom)}),!(maxBottom<=container.clientHeight)){const div=document.createElement("div");div.className="mud-cal-overflow-message";div.textContent="+";div.style.insetInlineStart=position/container.clientWidth*100+"%";container.appendChild(div);let hiddenElements=0;positions.forEach(position=>{position.Bottom>container.clientHeight-div.clientHeight&&(hiddenElements++,position.Hidden=!0)});div.textContent="+"+hiddenElements+" "+_moreText;div.style.top=container.clientHeight-div.clientHeight+"px";_obj&&(div.classList.add("mud-cal-clickable"),div.addEventListener("click",async()=>{const date=datePositions.get(Math.round(position));date&&await _obj.invokeMethodAsync("MoreClicked",date)}))}}function offsetStart(element){return _isRtl?element.offsetParent.offsetWidth-element.offsetLeft-element.offsetWidth:element.offsetLeft}export class Resizer{_obj;_handle;_container;_cellCount;_intervalSize;_item;_startSize;_startPos;_resizeX;_position;constructor(handleId,containerClass,cellCount,resizeX,obj){this._obj=obj;this._resizeX=resizeX;this._handle=document.getElementById(handleId);this._container=document.getElementsByClassName(containerClass)[0];this._cellCount=cellCount;this._item=this._handle.closest(".mud-cal-drop-item");this._handle.addEventListener("mousedown",this.onMouseDown)}updateCellCount(cellCount){this._cellCount=cellCount}onMouseDown=e=>{e.stopPropagation();if(this._resizeX){this._intervalSize=this._container.clientWidth/this._cellCount;this._startSize=this._item.clientWidth;this._startPos=e.clientX}else{this._intervalSize=this._container.clientHeight/this._cellCount;this._startSize=this._item.clientHeight;this._startPos=e.clientY}document.addEventListener("mouseup",this.onMouseUp);document.addEventListener("mousemove",this.onMouseMove)};onMouseUp=async()=>{document.removeEventListener("mouseup",this.onMouseUp);document.removeEventListener("mousemove",this.onMouseMove);const newSize=this.update();await this._obj.invokeMethodAsync("ResizeFinished",newSize)};onMouseMove=e=>{this._position=this._resizeX?e.clientX:e.clientY;this.update()};update(){const movement=this._position-this._startPos;let size=this._startSize+movement;return this._resizeX?this._item.offsetLeft+size>this._container.clientWidth&&(size=this._container.clientWidth-this._item.offsetLeft):this._item.offsetTop+size>this._container.clientHeight&&(size=this._container.clientHeight-this._item.offsetTop),size<this._intervalSize&&(size=this._intervalSize),size=Math.round(size/this._intervalSize)*this._intervalSize,this._resizeX?this._item.style.width=size+"px":this._item.style.height=size+"px",size/this._intervalSize}}let _moreText="",_obj=null,_isRtl=!1;class ItemPosition{Top=0;Height=0;Start=0;Width=0;Item=null;Hidden=false;get Bottom(){return this.Top+this.Height}get End(){return this.Start+this.Width}}